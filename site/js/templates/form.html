<div class="container">
 <div class="col-md-8 white-panel well">
    <div class="row-fluid form-header">                                                                                    
 	<p>Let's get started.
	Tell us about yourself and upload the required documents.</p>
    </div>
    <div class="row-fluid form">
	 <form id="addUser" role="form">
	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
		<a data-toggle="collapse" data-target="#collapseOne">
		<span class="glyphicon glyphicon-chevron-down "></span> Resume
		</a>
	      </h4>
	    </div>
	    <div id="collapseOne" class="panel-collapse collapse in">
	      <div class="panel-body">
		<div class="form-group">Upload your resume in English (file size must be 2 MB or less). 
                Include the names of 3 references in it.</div>                    
		  <div class="form-group">
                    <label for="resume" class="control-label">File input</label><span class="help-block hidden"></span>
                    <input  type="file" id="resume" name="resume" multiple="multiple" >
                  </div>
	      </div>
	    </div>
	  </div>

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
	       	<a data-toggle="collapse" data-target="#collapseTwo">
		<span class="glyphicon glyphicon-chevron-down "></span> Contact details
	       </a>
	      </h4>
	    </div>
	    <div id="collapseTwo" class="panel-collapse collapse in">
	      <div class="panel-body">
		<!--form id="addUser" role="form"-->
		  <div class="form-group">
                    <label for="name" class="control-label">Legal name</label><span class="help-block hidden"></span>
                    <div class="row">		    
                    <div class="col-md-6">
		    <input type="text" class="form-control" id="name" name="name">
                    </div></div>
		  </div>
		  <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-6">
		    <label for="email" class="control-label">Email address</label><span class="help-block hidden"></span>
		    <input type="email" class="form-control" id="email" name="email">
                    </div></div>
		  </div>
		  <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-5">
		    <label for="nationality" class="control-label">Nationality</label><span class="help-block hidden"></span>
                    <select id="nationality" class="form-control" name="nationality" placeholder="Select a country..."></select>
                    </div>
                    </div>
		  </div>
		<!--/form-->
	      </div>
	    </div>
	  </div>

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
	       	<a data-toggle="collapse" data-target="#collapseFour">
		<span class="glyphicon glyphicon-chevron-down "></span> Education
	       </a>
	      </h4>
	    </div>
	    <div id="collapseFour" class="panel-collapse collapse in">
	      <div class="panel-body">
	          <div class="form-group">
                  Add the following information about the highest degree that you have 
                  obtained or you are currently pursuing:
                  </div>
		  <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-6">
		    <label for="school" class="control-label">School name</label><span class="help-block hidden"></span>
		    <input type="text" class="form-control" id="school" name="school" placeholder="">
                    </div></div>
		  </div>
                   <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-5">
		    <label for="country" class="control-label">Country</label><span class="help-block hidden"></span>
                    <select id="country" class="form-control" name="country" placeholder="Select a country..."></select>
                    </div></div>
		  </div>
		  <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-4">
		   <label for="degree" class="control-label">Degree</label><span class="help-block hidden"></span>
                    <select id="degree" class="form-control" name="degree" placeholder="Select a degree..."></select>
                    </div></div>
		  </div>

                  <div class="row">		    
                    <div class="col-md-4">
		      <div class="form-group">
		        <label for="status" class="control-label">Degree status</label><span class="help-block hidden"></span>
                        <select id="status" class="form-control" name="status" placeholder="Select a degree status..."></select>
                       </div>
                    </div> 
                    <div class="col-md-4">      
                      <div class="form-group" style="display: none">
                        <label for="graduation" class="control-label">Expected graduation</label><span class="help-block hidden"></span>
<div class="input-group date" id="graduation" data-date="02/2014" data-date-format="mm/yyyy" data-date-viewmode="years" data-date-minviewmode="months">
   <input name="graduation" class="form-control" type="text" placeholder="mm/yyyy" readonly><span class="input-group-addon add-on"><i class="icon-calendar"></i></span>
</div>

                      
                      </div>
		    </div>
                   </div>





                   <div class="form-group">
                    <div class="row">		    
                    <div class="col-md-4">
                  <label for="major" class="control-label">Major / Area of study</label><span class="help-block hidden"></span>
		    <input type="text" class="form-control" id="major" name="major" placeholder="">
                    </div></div>
		  </div>
		  
		<!--/form-->
	      </div>
	    </div>
	  </div>

	  <div class="panel panel-default">
	    <div class="panel-heading">
	      <h4 class="panel-title">
		 <a data-toggle="collapse" href="#collapseThree">
		<span class="glyphicon glyphicon-chevron-right "></span> Interest / Motivation letter
		</a>
	      </h4>
	    </div>
	    <div id="collapseThree" class="panel-collapse collapse in">
	      <div class="panel-body">
		<!--form role="form"-->
	          <div class="form-group">
                  <div class="row">		    
                  <div class="col-md-9">
                  <label for="major" class="control-label">Open position</label><span class="help-block hidden"></span>
                  <div>
                  Tell us which job opening(s) are you applying for (multiple options are allowed):</div>
                  <select id="positions" class="form-control" name="positions" placeholder="Select one or more..."></select>
                  </div></div>
                  </div>

	          <div class="form-group" style="display: none">
                  <div class="row">		    
                  <div class="col-md-9">
                     <label for="major" class="control-label">EPFL admission</label><span class="help-block hidden"></span>
                     <div>Idiap Phd students must be enrolled to an EPFL doctoral school. Have you already applied to it?</div>
                     <select id="admission" class="form-control" name="admission"></select>
	          </div>
                  </div>
                  </div>


                  <div class="form-group">
                  <div class="row">		    
                  <div class="col-md-9">
                    <label for="cover_letter" class="control-label">Motivation letter</label><span class="help-block hidden"></span>
                    <div>Upload your motivation letter in English (file size must be 2 MB or less):</div>
                    <input type="file" id="cover_letter" name="cover_letter" multiple="multiple" >
		  </div>
                  </div>
                  </div>
	      </div>

	    </div>
	  </div>


          <div class="panel panel-default">
	  
             <div class="panel-body">
		<!--form role="form"-->
	          <div class="form-group">
                  <div class="row">		    
                  <div class="col-md-9">
                  <label for="source" class="control-label">Before we finish...</label><span class="help-block hidden"></span>
                  <div>
                  Tell us how did you find the job annoucement</div>
                  <select id="source" class="form-control" name="source" placeholder="Select one option..."></select>
                  </div></div>
		  </div>
		<!--/form-->
	      </div>
	  </div>
          <div class="form-group">
          <div id="recaptcha" name="response"></div><span class="help-block hidden"></span>
          </div>
          <div id="InfoContainer" class="col-md-12 bg-info alert hidden">
          
           <p class="text-info"></p>
          </div>          	  
	  <button type="submit" class="btn btn-primary" id="submit">Submit</button><span class="field-validation" data-msg='has_errors'></span><span id="Loader" class="hidden"  ><img src="https://s3-eu-west-1.amazonaws.com/raclette-public/loading25x25.gif" alt=""></span>
	  </form>

          
	<!--/div-->
      </div>
      
      <div class="row-fluid">
        <br>
        <p>Having problems? please, contact as at idiapsc.jobs@gmail.com</p>
      </div>
    </div>

  
  </div>

<script>
$('#nationality').selectize();
$('#country').selectize();
$('#degree').selectize();
var $status = $('#status').selectize();
var sel_status = $status[0].selectize;
$('#source').selectize();
$('#graduation').datepicker();
var $positions = $('#positions').selectize({    
    maxItems: null,
});
var sel_graduation = $positions[0].selectize;
$('#admission').selectize();

// if phd, add admission question
function show_admissions(value,item){
  //console.log("item_added",value,item);
  //
  if(value.split("-")[0]=="PHD"){ 
    $('#hide_admission').show();
     $el = $('#admission');
    $group = $el.closest('.form-group');
    $group.show();
  }
}
function hide_admissions(value){
  // if value is phd, we need to check if there is still
  // other options selected...
  var values = sel_graduation.getValue();
  var valid = false; //false
  //console.log("hide",values);
  for (var i=0;i<values.length;i++){
    if(values[i].split("-")[0]=="PHD") valid = true;
  }
  if(!valid){ 
    $el = $('#admission');
    $group = $el.closest('.form-group');
    $group.hide();
  }
  
}

// if attending, add expected graduation
function show_graduation(value,item){
  $el = $('#graduation');
  $group = $el.closest('.form-group');
  if(value=="AT")  $group.show();
  else $group.hide();
  
}

sel_graduation.on('item_add',show_admissions);
sel_graduation.on('item_remove',hide_admissions);
sel_status.on('item_add',show_graduation);
//sel_status.on('item_remove',hide_graduation);


</script>
                                
